<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmailJS Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-box {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #eb6107;
        }
        .status {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background-color: #eb6107;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background-color: #d55506;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="test-box">
        <h1>üîß EmailJS Configuration Test</h1>
        
        <div id="status"></div>
        
        <h3>Your Current Configuration:</h3>
        <pre id="config"></pre>
        
        <h3>Test Actions:</h3>
        <button onclick="testConnection()">Test EmailJS Connection</button>
        <button onclick="sendTestEmail()">Send Test Email</button>
        
        <h3>Checklist:</h3>
        <ul>
            <li>‚úÖ Public Key: <code>gBM0W-G2RDT8Qw7vq</code></li>
            <li>‚úÖ Service ID: <code>service_e3uauzm</code></li>
            <li>‚úÖ Template ID: <code>template_rxhjqhu</code></li>
        </ul>
        
        <h3>Common Issues:</h3>
        <ol>
            <li><strong>Template variables don't match:</strong> Make sure your EmailJS template uses these exact variable names:
                <ul>
                    <li>{{from_name}}</li>
                    <li>{{from_email}}</li>
                    <li>{{phone}}</li>
                    <li>{{interest}}</li>
                    <li>{{career_goals}}</li>
                    <li>{{business_name}}</li>
                    <li>{{contact_person}}</li>
                    <li>{{service_interest}}</li>
                    <li>{{project_description}}</li>
                    <li>{{form_type}}</li>
                </ul>
            </li>
            <li><strong>Service not connected:</strong> In EmailJS dashboard, make sure your email service is connected and verified</li>
            <li><strong>Template not saved:</strong> Make sure you clicked "Save" in the template editor</li>
            <li><strong>Wrong email service:</strong> Make sure the service ID matches the service in your EmailJS account</li>
        </ol>
        
        <div id="console-output"></div>
    </div>

    <!-- EmailJS Library -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <script>
        // Your actual configuration
        const config = {
            publicKey: 'gBM0W-G2RDT8Qw7vq',
            serviceId: 'service_e3uauzm',
            templateId: 'template_rxhjqhu'
        };
        
        // Display configuration
        document.getElementById('config').textContent = JSON.stringify(config, null, 2);
        
        // Initialize EmailJS
        (function() {
            emailjs.init(config.publicKey);
            showStatus('EmailJS initialized with Public Key: ' + config.publicKey, 'info');
        })();
        
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
        }
        
        function testConnection() {
            showStatus('Testing connection...', 'info');
            
            // Check if emailjs is loaded
            if (typeof emailjs === 'undefined') {
                showStatus('‚ùå ERROR: EmailJS library not loaded!', 'error');
                return;
            }
            
            showStatus('‚úÖ SUCCESS: EmailJS library is loaded and initialized!', 'success');
        }
        
        function sendTestEmail() {
            showStatus('Sending test email...', 'info');
            
            const testData = {
                from_name: 'Test Student',
                from_email: 'test@example.com',
                phone: '1234567890',
                interest: 'Web Development',
                career_goals: 'Become a full-stack developer',
                form_type: 'Student Registration (TEST)',
                business_name: '',
                contact_person: '',
                service_interest: '',
                project_description: ''
            };
            
            emailjs.send(config.serviceId, config.templateId, testData)
                .then(function(response) {
                    console.log('SUCCESS!', response);
                    showStatus('‚úÖ SUCCESS! Test email sent. Check your inbox! Response: ' + JSON.stringify(response), 'success');
                }, function(error) {
                    console.error('FAILED...', error);
                    showStatus('‚ùå ERROR: ' + JSON.stringify(error) + '<br><br>Check console for details (Press F12)', 'error');
                    
                    // Show common fixes
                    let errorMsg = error.text || error.message || 'Unknown error';
                    if (errorMsg.includes('Template')) {
                        showStatus('‚ùå Template Error: Make sure template ID "template_rxhjqhu" exists in your EmailJS account', 'error');
                    } else if (errorMsg.includes('Service')) {
                        showStatus('‚ùå Service Error: Make sure service ID "service_e3uauzm" exists and is connected', 'error');
                    } else if (errorMsg.includes('Public Key') || errorMsg.includes('User ID')) {
                        showStatus('‚ùå Public Key Error: Make sure public key "gBM0W-G2RDT8Qw7vq" is correct', 'error');
                    }
                });
        }
    </script>
</body>
</html>
